<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes & Amazon EKS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #ffffff;
        }

        .slide {
            width: 100%;
            min-height: 100vh;
            padding: 60px 80px 80px 80px;
            page-break-after: always;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }
        
        .slide-footer {
            position: absolute;
            bottom: 20px;
            right: 80px;
            font-size: 0.9rem;
            color: #6b7280;
            font-style: italic;
        }

        .title-slide {
            background: linear-gradient(135deg, #232F3E 0%, #FF9900 100%);
            color: white;
            text-align: center;
        }

        .slide-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .slide-subtitle {
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 40px;
            opacity: 0.9;
        }

        h1 {
            font-size: 2.8rem;
            color: #232F3E;
            margin-bottom: 30px;
            text-align: center;
            border-bottom: 3px solid #FF9900;
            padding-bottom: 15px;
        }

        h2 {
            font-size: 2.2rem;
            color: #232F3E;
            margin-bottom: 25px;
            border-bottom: 2px solid #FF9900;
            padding-bottom: 10px;
        }

        h3 {
            font-size: 1.6rem;
            color: #232F3E;
            margin-bottom: 20px;
            margin-top: 30px;
        }

        p, li {
            font-size: 1.1rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        .highlight-box {
            background: #f3f4f6;
            border-left: 5px solid #FF9900;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .comparison-table th {
            background: #232F3E;
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #f3f4f6;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .grid-item {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .architecture-diagram {
            text-align: center;
            background: #f8fafc;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>

    <!-- Title Slide -->
    <div class="slide title-slide">
        <div class="slide-title">Kubernetes & Amazon EKS</div>
        <div class="slide-subtitle">Container Orchestration on AWS</div>
        <div class="slide-subtitle" style="font-size: 1.2rem; margin-top: 40px;">
            Understanding Kubernetes, EKS vs ECS, and Architecture
        </div>
        <div class="slide-footer">AWS Training Series</div>
    </div>

    <!-- What is Kubernetes -->
    <div class="slide">
        <h1>What is Kubernetes?</h1>
        
        <div class="highlight-box">
            <h3>Kubernetes (K8s)</h3>
            <p>An open-source container orchestration platform that automates deployment, scaling, and management of containerized applications.</p>
        </div>

        <h3>Key Features:</h3>
        <ul>
            <li><strong>Container Orchestration:</strong> Manages containers across multiple hosts</li>
            <li><strong>Auto-scaling:</strong> Automatically scales applications based on demand</li>
            <li><strong>Self-healing:</strong> Restarts failed containers and replaces unhealthy nodes</li>
            <li><strong>Service Discovery:</strong> Automatically discovers and connects services</li>
            <li><strong>Load Balancing:</strong> Distributes traffic across healthy containers</li>
            <li><strong>Rolling Updates:</strong> Updates applications without downtime</li>
        </ul>

        <div class="slide-footer">Kubernetes Fundamentals</div>
    </div>

    <!-- What is Amazon EKS -->
    <div class="slide">
        <h1>What is Amazon EKS?</h1>
        
        <div class="highlight-box">
            <h3>Amazon Elastic Kubernetes Service (EKS)</h3>
            <p>A fully managed Kubernetes service that makes it easy to run Kubernetes on AWS without needing to install and operate your own Kubernetes control plane.</p>
        </div>

        <h3>EKS Benefits:</h3>
        <ul>
            <li><strong>Fully Managed:</strong> AWS manages the Kubernetes control plane</li>
            <li><strong>High Availability:</strong> Control plane runs across multiple AZs</li>
            <li><strong>Security:</strong> Integrated with AWS IAM and VPC</li>
            <li><strong>Scalability:</strong> Automatically scales control plane</li>
            <li><strong>AWS Integration:</strong> Native integration with AWS services</li>
            <li><strong>Compliance:</strong> SOC, PCI, ISO, and HIPAA compliant</li>
        </ul>

        <div class="slide-footer">Amazon EKS Overview</div>
    </div>

    <!-- Why EKS when we have ECS -->
    <div class="slide">
        <h1>Why EKS when we have ECS?</h1>
        
        <div class="grid-container">
            <div class="grid-item">
                <h3>üéØ Use EKS When:</h3>
                <ul>
                    <li>You need Kubernetes-native features</li>
                    <li>Multi-cloud or hybrid deployments</li>
                    <li>Complex microservices architecture</li>
                    <li>Existing Kubernetes expertise</li>
                    <li>Need advanced networking (service mesh)</li>
                    <li>Custom resource definitions (CRDs)</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üöÄ Use ECS When:</h3>
                <ul>
                    <li>Simple container workloads</li>
                    <li>AWS-native applications</li>
                    <li>Faster time to market</li>
                    <li>Less operational overhead</li>
                    <li>Tight AWS service integration</li>
                    <li>Serverless containers (Fargate)</li>
                </ul>
            </div>
        </div>

        <div class="highlight-box">
            <strong>Key Insight:</strong> EKS provides Kubernetes flexibility and portability, while ECS offers simplicity and AWS-native integration.
        </div>

        <div class="slide-footer">EKS vs ECS Decision Matrix</div>
    </div>

    <!-- Detailed Comparison -->
    <div class="slide">
        <h1>EKS vs ECS: Detailed Comparison</h1>
        
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Amazon EKS</th>
                    <th>Amazon ECS</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Learning Curve</strong></td>
                    <td>Steep (Kubernetes knowledge required)</td>
                    <td>Moderate (AWS-specific)</td>
                </tr>
                <tr>
                    <td><strong>Portability</strong></td>
                    <td>High (runs anywhere Kubernetes runs)</td>
                    <td>AWS-specific</td>
                </tr>
                <tr>
                    <td><strong>Ecosystem</strong></td>
                    <td>Rich Kubernetes ecosystem (Helm, operators)</td>
                    <td>AWS-native tools and services</td>
                </tr>
                <tr>
                    <td><strong>Networking</strong></td>
                    <td>Advanced (CNI plugins, service mesh)</td>
                    <td>Simple (AWS VPC integration)</td>
                </tr>
                <tr>
                    <td><strong>Cost</strong></td>
                    <td>$0.10/hour per cluster + worker nodes</td>
                    <td>No control plane cost + worker nodes</td>
                </tr>
                <tr>
                    <td><strong>Scaling</strong></td>
                    <td>Horizontal Pod Autoscaler, Cluster Autoscaler</td>
                    <td>Service Auto Scaling, Capacity Providers</td>
                </tr>
            </tbody>
        </table>

        <div class="slide-footer">Feature Comparison</div>
    </div>

    <!-- Real World Example -->
    <div class="slide">
        <h1>Real-World Application Example</h1>
        
        <h2>E-commerce Platform: "ShopFast"</h2>
        
        <div class="grid-container">
            <div class="grid-item">
                <h3>üè™ ECS Implementation</h3>
                <ul>
                    <li><strong>Frontend:</strong> React app on ECS Fargate</li>
                    <li><strong>API Gateway:</strong> ALB + ECS services</li>
                    <li><strong>Microservices:</strong> User, Product, Order services</li>
                    <li><strong>Database:</strong> RDS MySQL</li>
                    <li><strong>Caching:</strong> ElastiCache Redis</li>
                </ul>
                <p><strong>Best for:</strong> Simple deployment, tight AWS integration, faster development</p>
            </div>
            
            <div class="grid-item">
                <h3>‚öôÔ∏è EKS Implementation</h3>
                <ul>
                    <li><strong>Frontend:</strong> React pods with Ingress</li>
                    <li><strong>API Gateway:</strong> Istio service mesh</li>
                    <li><strong>Microservices:</strong> Kubernetes deployments</li>
                    <li><strong>Database:</strong> PostgreSQL operator</li>
                    <li><strong>Monitoring:</strong> Prometheus + Grafana</li>
                </ul>
                <p><strong>Best for:</strong> Complex workflows, multi-cloud strategy, advanced networking</p>
            </div>
        </div>

        <div class="highlight-box">
            <strong>Scenario:</strong> ShopFast started with ECS for rapid deployment. As they grew globally and needed multi-cloud presence, they migrated critical services to EKS for portability and advanced features.
        </div>

        <div class="slide-footer">Real-World Implementation</div>
    </div>

    <!-- Kubernetes Architecture Overview -->
    <div class="slide">
        <h1>Kubernetes Architecture</h1>
        
        <div class="architecture-diagram">
            <h2>Master Node (Control Plane)</h2>
            <div style="background: #e3f2fd; padding: 20px; margin: 10px; border-radius: 8px;">
                <strong>API Server</strong> | <strong>etcd</strong> | <strong>Scheduler</strong> | <strong>Controller Manager</strong>
            </div>
            
            <h2>Worker Nodes</h2>
            <div style="display: flex; justify-content: space-around; margin-top: 20px;">
                <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; width: 30%;">
                    <strong>Node 1</strong><br>
                    kubelet<br>
                    kube-proxy<br>
                    Container Runtime
                </div>
                <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; width: 30%;">
                    <strong>Node 2</strong><br>
                    kubelet<br>
                    kube-proxy<br>
                    Container Runtime
                </div>
                <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; width: 30%;">
                    <strong>Node 3</strong><br>
                    kubelet<br>
                    kube-proxy<br>
                    Container Runtime
                </div>
            </div>
        </div>

        <div class="slide-footer">Kubernetes Architecture</div>
    </div>

    <!-- Control Plane Components -->
    <div class="slide">
        <h1>Control Plane Components</h1>
        
        <div class="grid-container">
            <div class="grid-item">
                <h3>üéØ API Server</h3>
                <ul>
                    <li>Front-end for Kubernetes control plane</li>
                    <li>Exposes Kubernetes API</li>
                    <li>Validates and processes REST operations</li>
                    <li>Gateway for all administrative tasks</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üíæ etcd</h3>
                <ul>
                    <li>Distributed key-value store</li>
                    <li>Stores all cluster data</li>
                    <li>Source of truth for cluster state</li>
                    <li>Highly available and consistent</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üìÖ Scheduler</h3>
                <ul>
                    <li>Assigns pods to nodes</li>
                    <li>Considers resource requirements</li>
                    <li>Evaluates constraints and policies</li>
                    <li>Optimizes resource utilization</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üéÆ Controller Manager</h3>
                <ul>
                    <li>Runs controller processes</li>
                    <li>Node Controller (monitors nodes)</li>
                    <li>Replication Controller (maintains pod count)</li>
                    <li>Service Account & Token Controllers</li>
                </ul>
            </div>
        </div>

        <div class="slide-footer">Control Plane Deep Dive</div>
    </div>

    <!-- Worker Node Components -->
    <div class="slide">
        <h1>Worker Node Components</h1>
        
        <div class="grid-container">
            <div class="grid-item">
                <h3>ü§ñ kubelet</h3>
                <ul>
                    <li>Primary node agent</li>
                    <li>Communicates with API server</li>
                    <li>Manages pod lifecycle</li>
                    <li>Reports node and pod status</li>
                    <li>Executes container operations</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üåê kube-proxy</h3>
                <ul>
                    <li>Network proxy on each node</li>
                    <li>Maintains network rules</li>
                    <li>Enables service abstraction</li>
                    <li>Load balances traffic to pods</li>
                    <li>Implements service discovery</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üì¶ Container Runtime</h3>
                <ul>
                    <li>Runs containers (Docker, containerd, CRI-O)</li>
                    <li>Pulls container images</li>
                    <li>Manages container lifecycle</li>
                    <li>Provides container isolation</li>
                    <li>Handles resource allocation</li>
                </ul>
            </div>
        </div>

        <div class="highlight-box">
            <strong>In EKS:</strong> AWS manages the control plane components, while you manage the worker nodes (or use Fargate for serverless containers).
        </div>

        <div class="slide-footer">Worker Node Components</div>
    </div>

    <!-- Kubernetes Objects -->
    <div class="slide">
        <h1>Key Kubernetes Objects</h1>
        
        <div class="grid-container">
            <div class="grid-item">
                <h3>üè† Pod</h3>
                <p>Smallest deployable unit containing one or more containers</p>
            </div>
            
            <div class="grid-item">
                <h3>üöÄ Deployment</h3>
                <p>Manages replica sets and provides declarative updates</p>
            </div>
            
            <div class="grid-item">
                <h3>üîó Service</h3>
                <p>Exposes pods as network services with stable endpoints</p>
            </div>
            
            <div class="grid-item">
                <h3>üåç Ingress</h3>
                <p>Manages external access to services (HTTP/HTTPS routing)</p>
            </div>
            
            <div class="grid-item">
                <h3>üìã ConfigMap</h3>
                <p>Stores configuration data as key-value pairs</p>
            </div>
            
            <div class="grid-item">
                <h3>üîê Secret</h3>
                <p>Stores sensitive data like passwords and API keys</p>
            </div>
        </div>

        <div class="slide-footer">Kubernetes Objects</div>
    </div>

    <!-- Kubernetes Manifest Files -->
    <div class="slide">
        <h1>Kubernetes Manifest Files</h1>
        
        <div class="highlight-box">
            <h3>What are Manifest Files?</h3>
            <p>YAML or JSON files that describe the desired state of Kubernetes objects. They define how applications should be deployed, configured, and managed.</p>
        </div>

        <h3>Common Manifest Structure:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-app
  namespace: default
spec:
  # Specification details
status:
  # Current state (managed by Kubernetes)
        </pre>

        <h3>Key Fields:</h3>
        <ul>
            <li><strong>apiVersion:</strong> API version for the object</li>
            <li><strong>kind:</strong> Type of Kubernetes object</li>
            <li><strong>metadata:</strong> Object identification (name, namespace, labels)</li>
            <li><strong>spec:</strong> Desired state specification</li>
            <li><strong>status:</strong> Current state (read-only, managed by Kubernetes)</li>
        </ul>

        <div class="slide-footer">Manifest Files Overview</div>
    </div>

    <!-- Pod Manifest -->
    <div class="slide">
        <h1>Pod Manifest</h1>
        
        <div class="highlight-box">
            <h3>Pod: Basic Execution Unit</h3>
            <p>A Pod wraps one or more containers with shared storage and network. It's the smallest deployable unit in Kubernetes.</p>
        </div>

        <h3>nginx-pod.yaml:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.8rem; overflow-x: auto;">
apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
  labels:
    app: nginx
    tier: frontend
spec:
  containers:
  - name: nginx
    image: nginx:1.21
    ports:
    - containerPort: 80
      name: http
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
    env:
    - name: NGINX_PORT
      value: "80"
  restartPolicy: Always
        </pre>

        <h3>Key Features:</h3>
        <ul>
            <li><strong>Single Container:</strong> nginx web server</li>
            <li><strong>Resource Limits:</strong> CPU and memory constraints</li>
            <li><strong>Environment Variables:</strong> Configuration through env vars</li>
            <li><strong>Labels:</strong> For identification and selection</li>
        </ul>

        <div class="slide-footer">Pod Configuration</div>
    </div>

    <!-- Deployment Manifest -->
    <div class="slide">
        <h1>Deployment Manifest</h1>
        
        <div class="highlight-box">
            <h3>Deployment: Scalable Pod Management</h3>
            <p>Manages ReplicaSets and provides declarative updates, rolling deployments, and scaling capabilities.</p>
        </div>

        <h3>nginx-deployment.yaml:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.75rem; overflow-x: auto;">
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  labels:
    app: nginx
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        ports:
        - containerPort: 80
        resources:
          requests:
            memory: "64Mi"
            cpu: "250m"
          limits:
            memory: "128Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 5
          periodSeconds: 5
        </pre>

        <div class="slide-footer">Deployment Configuration</div>
    </div>

    <!-- Service Manifest -->
    <div class="slide">
        <h1>Service Manifest</h1>
        
        <div class="highlight-box">
            <h3>Service: Network Abstraction</h3>
            <p>Provides stable network endpoint for pods, enabling service discovery and load balancing.</p>
        </div>

        <h3>nginx-service.yaml:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.8rem; overflow-x: auto;">
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
  labels:
    app: nginx
spec:
  type: LoadBalancer
  selector:
    app: nginx
  ports:
  - name: http
    port: 80
    targetPort: 80
    protocol: TCP
  sessionAffinity: None
---
# ClusterIP Service (internal)
apiVersion: v1
kind: Service
metadata:
  name: nginx-internal
spec:
  type: ClusterIP
  selector:
    app: nginx
  ports:
  - port: 80
    targetPort: 80
        </pre>

        <h3>Service Types:</h3>
        <ul>
            <li><strong>ClusterIP:</strong> Internal cluster access only</li>
            <li><strong>NodePort:</strong> Exposes service on each node's IP</li>
            <li><strong>LoadBalancer:</strong> Creates external load balancer (AWS ELB)</li>
            <li><strong>ExternalName:</strong> Maps to external DNS name</li>
        </ul>

        <div class="slide-footer">Service Configuration</div>
    </div>

    <!-- ConfigMap Manifest -->
    <div class="slide">
        <h1>ConfigMap Manifest</h1>
        
        <div class="highlight-box">
            <h3>ConfigMap: Configuration Management</h3>
            <p>Stores configuration data as key-value pairs, separating config from application code.</p>
        </div>

        <h3>nginx-configmap.yaml:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.75rem; overflow-x: auto;">
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
data:
  # Simple key-value pairs
  nginx.conf: |
    server {
        listen 80;
        server_name localhost;
        
        location / {
            root /usr/share/nginx/html;
            index index.html index.htm;
        }
        
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }
    }
  
  # Environment variables
  NGINX_WORKER_PROCESSES: "auto"
  NGINX_WORKER_CONNECTIONS: "1024"
  
  # HTML content
  index.html: |
    <!DOCTYPE html>
    <html>
    <head><title>Welcome to nginx on EKS!</title></head>
    <body>
        <h1>Hello from Kubernetes!</h1>
        <p>This nginx server is running on Amazon EKS</p>
    </body>
    </html>
        </pre>

        <div class="slide-footer">ConfigMap Configuration</div>
    </div>

    <!-- Secret Manifest -->
    <div class="slide">
        <h1>Secret Manifest</h1>
        
        <div class="highlight-box">
            <h3>Secret: Sensitive Data Management</h3>
            <p>Stores sensitive information like passwords, tokens, and keys. Data is base64 encoded.</p>
        </div>

        <h3>nginx-secret.yaml:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.8rem; overflow-x: auto;">
apiVersion: v1
kind: Secret
metadata:
  name: nginx-secret
type: Opaque
data:
  # Base64 encoded values
  username: YWRtaW4=  # admin
  password: cGFzc3dvcmQxMjM=  # password123
  
---
# TLS Secret for HTTPS
apiVersion: v1
kind: Secret
metadata:
  name: nginx-tls
type: kubernetes.io/tls
data:
  tls.crt: LS0tLS1CRUdJTi... # base64 encoded certificate
  tls.key: LS0tLS1CRUdJTi... # base64 encoded private key

---
# Docker registry secret
apiVersion: v1
kind: Secret
metadata:
  name: docker-registry-secret
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: eyJhdXRocyI6... # base64 encoded docker config
        </pre>

        <h3>Secret Types:</h3>
        <ul>
            <li><strong>Opaque:</strong> Generic secret (default)</li>
            <li><strong>kubernetes.io/tls:</strong> TLS certificates</li>
            <li><strong>kubernetes.io/dockerconfigjson:</strong> Docker registry auth</li>
            <li><strong>kubernetes.io/basic-auth:</strong> Basic authentication</li>
        </ul>

        <div class="slide-footer">Secret Configuration</div>
    </div>

    <!-- Ingress Manifest -->
    <div class="slide">
        <h1>Ingress Manifest</h1>
        
        <div class="highlight-box">
            <h3>Ingress: HTTP/HTTPS Routing</h3>
            <p>Manages external access to services, providing load balancing, SSL termination, and name-based virtual hosting.</p>
        </div>

        <h3>nginx-ingress.yaml:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.75rem; overflow-x: auto;">
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx-ingress
  annotations:
    kubernetes.io/ingress.class: "alb"
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/healthcheck-path: /health
    alb.ingress.kubernetes.io/ssl-redirect: '443'
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
spec:
  tls:
  - hosts:
    - nginx.example.com
    secretName: nginx-tls
  rules:
  - host: nginx.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginx-service
            port:
              number: 80
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: api-service
            port:
              number: 8080
        </pre>

        <div class="slide-footer">Ingress Configuration</div>
    </div>

    <!-- Complete Application Manifest -->
    <div class="slide">
        <h1>Complete Application: nginx-app.yaml</h1>
        
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.65rem; overflow-x: auto; max-height: 70vh; overflow-y: auto;">
# Namespace
apiVersion: v1
kind: Namespace
metadata:
  name: nginx-app
---
# ConfigMap
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
  namespace: nginx-app
data:
  nginx.conf: |
    server {
        listen 80;
        location / {
            root /usr/share/nginx/html;
            index index.html;
        }
        location /health {
            return 200 "healthy\n";
        }
    }
---
# Secret
apiVersion: v1
kind: Secret
metadata:
  name: nginx-secret
  namespace: nginx-app
type: Opaque
data:
  username: YWRtaW4=
  password: cGFzc3dvcmQxMjM=
---
# Deployment
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  namespace: nginx-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        ports:
        - containerPort: 80
        volumeMounts:
        - name: config-volume
          mountPath: /etc/nginx/conf.d
        - name: secret-volume
          mountPath: /etc/nginx/secrets
          readOnly: true
        resources:
          requests:
            memory: "64Mi"
            cpu: "250m"
          limits:
            memory: "128Mi"
            cpu: "500m"
      volumes:
      - name: config-volume
        configMap:
          name: nginx-config
      - name: secret-volume
        secret:
          secretName: nginx-secret
---
# Service
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
  namespace: nginx-app
spec:
  selector:
    app: nginx
  ports:
  - port: 80
    targetPort: 80
  type: LoadBalancer
---
# Ingress
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx-ingress
  namespace: nginx-app
  annotations:
    kubernetes.io/ingress.class: "alb"
    alb.ingress.kubernetes.io/scheme: internet-facing
spec:
  rules:
  - host: nginx.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginx-service
            port:
              number: 80
        </pre>

        <div class="slide-footer">Complete Application Manifest</div>
    </div>

    <!-- EKS Cluster Setup -->
    <div class="slide">
        <h1>Setting Up EKS Cluster</h1>
        
        <h3>Prerequisites:</h3>
        <ul>
            <li>AWS CLI configured with appropriate permissions</li>
            <li>kubectl installed</li>
            <li>eksctl installed (optional but recommended)</li>
        </ul>

        <h3>1. Create EKS Cluster with eksctl:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Create cluster
eksctl create cluster \
  --name nginx-cluster \
  --region us-west-2 \
  --nodegroup-name standard-workers \
  --node-type t3.medium \
  --nodes 3 \
  --nodes-min 1 \
  --nodes-max 4 \
  --managed

# Update kubeconfig
aws eks update-kubeconfig --region us-west-2 --name nginx-cluster
        </pre>

        <h3>2. Verify Cluster:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
kubectl get nodes
kubectl get pods --all-namespaces
        </pre>

        <div class="slide-footer">EKS Cluster Setup</div>
    </div>

    <!-- Deploying to EKS -->
    <div class="slide">
        <h1>Deploying nginx Application to EKS</h1>
        
        <h3>Step 1: Install AWS Load Balancer Controller</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.8rem;">
# Create IAM OIDC provider
eksctl utils associate-iam-oidc-provider --region=us-west-2 --cluster=nginx-cluster --approve

# Create IAM service account
eksctl create iamserviceaccount \
  --cluster=nginx-cluster \
  --namespace=kube-system \
  --name=aws-load-balancer-controller \
  --role-name "AmazonEKSLoadBalancerControllerRole" \
  --attach-policy-arn=arn:aws:iam::aws:policy/ElasticLoadBalancingFullAccess \
  --approve

# Install controller
kubectl apply -k "github.com/aws/eks-charts/stable/aws-load-balancer-controller//crds?ref=master"
helm repo add eks https://aws.github.io/eks-charts
helm install aws-load-balancer-controller eks/aws-load-balancer-controller \
  -n kube-system \
  --set clusterName=nginx-cluster \
  --set serviceAccount.create=false \
  --set serviceAccount.name=aws-load-balancer-controller
        </pre>

        <div class="slide-footer">Load Balancer Controller Setup</div>
    </div>

    <!-- Deployment Commands -->
    <div class="slide">
        <h1>Deployment Commands</h1>
        
        <h3>Step 2: Deploy nginx Application</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Apply all manifests
kubectl apply -f nginx-app.yaml

# Or apply individually
kubectl apply -f nginx-configmap.yaml
kubectl apply -f nginx-secret.yaml
kubectl apply -f nginx-deployment.yaml
kubectl apply -f nginx-service.yaml
kubectl apply -f nginx-ingress.yaml
        </pre>

        <h3>Step 3: Verify Deployment</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Check all resources
kubectl get all -n nginx-app

# Check specific resources
kubectl get pods -n nginx-app
kubectl get services -n nginx-app
kubectl get ingress -n nginx-app

# Check pod logs
kubectl logs -f deployment/nginx-deployment -n nginx-app

# Describe resources for troubleshooting
kubectl describe pod <pod-name> -n nginx-app
kubectl describe service nginx-service -n nginx-app
        </pre>

        <div class="slide-footer">Deployment Commands</div>
    </div>

    <!-- Monitoring and Troubleshooting -->
    <div class="slide">
        <h1>Monitoring and Troubleshooting</h1>
        
        <h3>Essential kubectl Commands:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.8rem;">
# Get resource status
kubectl get pods,svc,ingress -n nginx-app

# Watch resources in real-time
kubectl get pods -n nginx-app -w

# Check resource details
kubectl describe deployment nginx-deployment -n nginx-app

# View logs
kubectl logs -f deployment/nginx-deployment -n nginx-app

# Execute commands in pod
kubectl exec -it <pod-name> -n nginx-app -- /bin/bash

# Port forwarding for testing
kubectl port-forward service/nginx-service 8080:80 -n nginx-app

# Check events
kubectl get events -n nginx-app --sort-by='.lastTimestamp'
        </pre>

        <h3>Common Issues and Solutions:</h3>
        <ul>
            <li><strong>ImagePullBackOff:</strong> Check image name and registry access</li>
            <li><strong>CrashLoopBackOff:</strong> Check application logs and resource limits</li>
            <li><strong>Service not accessible:</strong> Verify selectors and port configurations</li>
            <li><strong>Ingress not working:</strong> Check ingress controller and DNS settings</li>
        </ul>

        <div class="slide-footer">Monitoring and Troubleshooting</div>
    </div>

    <!-- Scaling and Updates -->
    <div class="slide">
        <h1>Scaling and Updates</h1>
        
        <h3>Horizontal Scaling:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Manual scaling
kubectl scale deployment nginx-deployment --replicas=5 -n nginx-app

# Auto-scaling with HPA
kubectl autoscale deployment nginx-deployment --cpu-percent=50 --min=1 --max=10 -n nginx-app

# Check HPA status
kubectl get hpa -n nginx-app
        </pre>

        <h3>Rolling Updates:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Update image
kubectl set image deployment/nginx-deployment nginx=nginx:1.22 -n nginx-app

# Check rollout status
kubectl rollout status deployment/nginx-deployment -n nginx-app

# Rollback if needed
kubectl rollout undo deployment/nginx-deployment -n nginx-app

# View rollout history
kubectl rollout history deployment/nginx-deployment -n nginx-app
        </pre>

        <h3>Resource Management:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Check resource usage
kubectl top nodes
kubectl top pods -n nginx-app

# Update resource limits
kubectl patch deployment nginx-deployment -n nginx-app -p '{"spec":{"template":{"spec":{"containers":[{"name":"nginx","resources":{"limits":{"memory":"256Mi","cpu":"1000m"}}}]}}}}'
        </pre>

        <div class="slide-footer">Scaling and Updates</div>
    </div>

    <!-- Best Practices -->
    <div class="slide">
        <h1>EKS Deployment Best Practices</h1>
        
        <div class="grid-container">
            <div class="grid-item">
                <h3>üîí Security</h3>
                <ul>
                    <li>Use IAM roles for service accounts (IRSA)</li>
                    <li>Enable Pod Security Standards</li>
                    <li>Use network policies</li>
                    <li>Scan images for vulnerabilities</li>
                    <li>Rotate secrets regularly</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üìä Resource Management</h3>
                <ul>
                    <li>Set resource requests and limits</li>
                    <li>Use horizontal pod autoscaling</li>
                    <li>Implement cluster autoscaling</li>
                    <li>Monitor resource usage</li>
                    <li>Use node selectors/affinity</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üöÄ Deployment</h3>
                <ul>
                    <li>Use rolling updates</li>
                    <li>Implement health checks</li>
                    <li>Use namespaces for isolation</li>
                    <li>Version your manifests</li>
                    <li>Test in staging first</li>
                </ul>
            </div>
            
            <div class="grid-item">
                <h3>üìà Monitoring</h3>
                <ul>
                    <li>Use Prometheus and Grafana</li>
                    <li>Enable CloudWatch Container Insights</li>
                    <li>Set up alerting</li>
                    <li>Monitor application metrics</li>
                    <li>Track resource utilization</li>
                </ul>
            </div>
        </div>

        <div class="slide-footer">Best Practices</div>
    </div>

    <!-- Cleanup -->
    <div class="slide">
        <h1>Cleanup Resources</h1>
        
        <div class="highlight-box">
            <h3>‚ö†Ô∏è Important: Always Clean Up</h3>
            <p>EKS clusters and associated resources incur costs. Always clean up when done with testing or development.</p>
        </div>

        <h3>Delete Application Resources:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Delete application
kubectl delete -f nginx-app.yaml

# Or delete namespace (removes all resources in it)
kubectl delete namespace nginx-app

# Check remaining resources
kubectl get all --all-namespaces
        </pre>

        <h3>Delete EKS Cluster:</h3>
        <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; font-size: 0.9rem;">
# Delete cluster (this may take 10-15 minutes)
eksctl delete cluster --name nginx-cluster --region us-west-2

# Verify deletion
aws eks list-clusters --region us-west-2
        </pre>

        <h3>Cost Optimization Tips:</h3>
        <ul>
            <li>Use Spot instances for non-critical workloads</li>
            <li>Right-size your nodes</li>
            <li>Use Fargate for serverless containers</li>
            <li>Monitor and optimize resource usage</li>
            <li>Set up billing alerts</li>
        </ul>

        <div class="slide-footer">Resource Cleanup</div>
    </div>

    <!-- Summary -->
    <div class="slide">
        <h1>Summary</h1>
        
        <div class="highlight-box">
            <h3>What We Covered</h3>
            <ul>
                <li><strong>Kubernetes Objects:</strong> Pod, Deployment, Service, ConfigMap, Secret, Ingress</li>
                <li><strong>Manifest Files:</strong> YAML configurations for each object type</li>
                <li><strong>EKS Setup:</strong> Cluster creation and configuration</li>
                <li><strong>nginx Deployment:</strong> Complete application deployment example</li>
                <li><strong>Best Practices:</strong> Security, scaling, monitoring, and cost optimization</li>
            </ul>
        </div>

        <h3>Key Takeaways:</h3>
        <ul>
            <li>Manifest files define desired state declaratively</li>
            <li>Each Kubernetes object serves a specific purpose</li>
            <li>EKS simplifies Kubernetes management on AWS</li>
            <li>Proper resource management is crucial for cost and performance</li>
            <li>Always follow security and operational best practices</li>
        </ul>

        <h3>Next Steps:</h3>
        <ul>
            <li>Practice with different application types</li>
            <li>Explore Helm for package management</li>
            <li>Implement CI/CD pipelines</li>
            <li>Learn about service mesh (Istio/App Mesh)</li>
            <li>Study advanced networking and security</li>
        </ul>

        <div class="slide-footer">Thank You!</div>
    </div>

</body>
</html>
